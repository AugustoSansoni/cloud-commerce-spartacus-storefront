<ng-container *ngIf="(product$ | async) as product">
  <ng-container *cxOutlet="outlets.PAGE">
    <div class="container">
      <div class="cx-product-details">
        <div>
          <ng-container *cxOutlet="outlets.TITLE">
            <div class="cx-product-details__item-name">{{ product?.name }}</div>
            <div class="cx-product-details__item-code">
              ID {{ product?.code }}
            </div>
          </ng-container>
        </div>
        <div class="cx-product-details__item-images">
          <ng-container *cxOutlet="outlets.IMAGES">
            <cx-product-images [product]="product"></cx-product-images>
          </ng-container>
        </div>
        <div>
          <ng-container *cxOutlet="outlets.RATING">
            <div class="cx-product-details__item-rating">
              <cx-star-rating
                [rating]="product?.averageRating"
                [disabled]="true"
              ></cx-star-rating>
              <div class="cx-product-details__review-count">
                ({{ product?.numberOfReviews }})
              </div>
              <a
                class="cx-product-details__review-link btn-link"
                (click)="goToReviews()"
              >
                Write a review</a
              >
            </div>
          </ng-container>

          <ng-container *cxOutlet="outlets.SUMMARY">
            <cx-product-summary
              [product]="product"
              (itemCountChange)="itemCount = $event"
            ></cx-product-summary>
          </ng-container>

          <ng-container *cxOutlet="outlets.ADDTOCART">
            <cx-add-to-cart
              *ngIf="product?.stock?.stockLevelStatus !== 'outOfStock'"
              [quantity]="itemCount"
              [productCode]="product?.code"
            ></cx-add-to-cart>
          </ng-container>

          <ng-container *cxOutlet="outlets.SHARE">
            <a href="#" class="btn-link"> Share </a>
          </ng-container>
        </div>
      </div>
    </div>

    <ng-container *cxOutlet="outlets.TAB">
      <div class="details">
        <ng-container *cxOutlet="outlets.DESCRIPTION">
          <h3 #descriptionHeader (click)="select($event, description)">
            Product Details
          </h3>
          <div #description>
            <div class="container">
              <p [innerHTML]="product?.description"></p>
            </div>
          </div>
        </ng-container>

        <ng-container *cxOutlet="outlets.SPECIFICATIONS">
          <h3 (click)="select($event, specifications)">Specs</h3>
          <div #specifications>
            <div class="container">
              <cx-product-attributes
                class="container"
                [product]="product"
              ></cx-product-attributes>
            </div>
          </div>
        </ng-container>

        <ng-container *cxOutlet="outlets.REVIEWS">
          <h3 #reviewHeader (click)="select($event, reviews)">
            Reviews ({{ product?.numberOfReviews }})
          </h3>
          <div #reviews>
            <div class="container">
              <cx-product-reviews
                class="container"
                [(isWritingReview)]="isWritingReview"
                [product]="product"
              ></cx-product-reviews>
            </div>
          </div>
        </ng-container>

        <ng-container *cxOutlet="outlets.SHIPPING">
          <h3 (click)="select($event, shipping)">Shipping</h3>
          <div #shipping>
            <div class="container">
              <!--
                <h3
                  yComponentWrapper
                  componentType="CMSTabParagraphComponent"
                  componentUid="deliveryTab"
                ></h3>
                <cx-dynamic-slot position="Tabs"></cx-dynamic-slot>
              -->
            </div>
          </div>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
</ng-container>
