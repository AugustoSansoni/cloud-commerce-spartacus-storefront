<ng-container *ngIf="(product$ | async) as product">
  <ng-container *cxOutlet="outlets.PAGE">
    <div class="container">
      <div class="cx-product-details">
        <div>
          <ng-container *cxOutlet="outlets.TITLE">
            <div class="cx-product-details__item-name">{{ product?.name }}</div>
            <div class="cx-product-details__item-code">
              ID {{ product?.code }}
            </div>
          </ng-container>
        </div>
        <div class="cx-product-details__item-images">
          <ng-container *cxOutlet="outlets.IMAGES">
            <cx-product-images [product]="product"></cx-product-images>
          </ng-container>
        </div>
        <div>
          <ng-container *cxOutlet="outlets.RATING">
            <div class="cx-product-details__item-rating">
              <cx-star-rating
                [rating]="product?.averageRating"
                [disabled]="true"
              ></cx-star-rating>
              <div class="cx-product-details__review-count">
                ({{ product?.numberOfReviews }})
              </div>
              <a
                class="cx-product-details__review-link btn-link"
                (click)="goToReviews($event)"
              >
                Write a review</a
              >
            </div>
          </ng-container>

          <ng-container *cxOutlet="outlets.SUMMARY">
            <cx-product-summary
              [product]="product"
              (itemCountChange)="itemCount = $event"
            ></cx-product-summary>
          </ng-container>

          <ng-container *cxOutlet="outlets.ADDTOCART">
            <cx-add-to-cart
              *ngIf="product?.stock?.stockLevelStatus !== 'outOfStock'"
              [quantity]="itemCount"
              [productCode]="product?.code"
            ></cx-add-to-cart>
          </ng-container>

          <ng-container *cxOutlet="outlets.SHARE">
            <a href="#" class="btn-link"> Share </a>
          </ng-container>
        </div>
      </div>
    </div>

    <ng-container *cxOutlet="outlets.TAB">
      <div class="details">
        <ng-container *cxOutlet="outlets.DESCRIPTION">
          <h3>Product Details</h3>
          <div #description><p [innerHTML]="product?.description"></p></div>
        </ng-container>

        <ng-container *cxOutlet="outlets.SPECIFICATIONS">
          <h3>Specs</h3>
          <div #specifications>
            <cx-product-attributes [product]="product"></cx-product-attributes>
          </div>
        </ng-container>

        <ng-container *cxOutlet="outlets.REVIEWS">
          <div #specifications>
            <h3>Reviews ({{ product?.numberOfReviews }})</h3>
            <cx-product-reviews
              [(isWritingReview)]="isWritingReview"
              [product]="product"
            ></cx-product-reviews>
          </div>
        </ng-container>

        <!--
          <ng-container *cxOutlet="outlets.SHIPPING">
            <div #specifications>
              <div
                yComponentWrapper
                componentType="CMSTabParagraphComponent"
                componentUid="deliveryTab"
              ></div>
              <cx-dynamic-slot position="Tabs"></cx-dynamic-slot>
            </div>
          </ng-container>
        -->
      </div>
    </ng-container>
  </ng-container>
</ng-container>
